<!DOCTYPE html>
<html>
  <head>
    <title>RubyOnRailsGroupProject</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <%= javascript_importmap_tags %>
    <%# Tailwind CDN %>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-100">
    <%= render partial: 'layouts/navs' %>
    <%= render partial: 'layouts/message' %>
    <% if user_signed_in? %>
      <div class="fixed bottom-[5%] left-4 flex justify-between items-center bg-teal-100 border-l-4 border-orange-500 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md" role="alert">
        <p class="text-sm whitespace-nowrap"><span class="font-bold">User:</span> <%= current_user.name %></p>
      </div>
    <% end %>
    <%= yield %>
    <script>
        // Function to remove the notice and alert messages and trigger the fade-out effect
        function removeMessages() {
            const noticeElement = document.getElementById('notice');
            const alertElement = document.getElementById('alert');

            if (noticeElement) {
                noticeElement.classList.add('opacity-0');
            }

            if (alertElement) {
                alertElement.classList.add('opacity-0');
            }

            // Remove the elements from the DOM after the animation completes
            setTimeout(() => {
                if (noticeElement) {
                    noticeElement.remove();
                }

                if (alertElement) {
                    alertElement.remove();
                }
            }, 1000); // Adjust the timing based on your transition duration (1000ms in this example)
        }

        // Call the removeMessages function after 3 seconds (3000 milliseconds)
        setTimeout(removeMessages, 3000);
    </script>
  </body>
</html>
